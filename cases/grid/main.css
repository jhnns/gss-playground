:root {
    --gap: 16px;
    --content-width: 100vw;
    --num-of-cols: calc(var(--num-of-cols-side) * 2 + var(--num-of-cols-text));
    --col-width: calc((var(--content-width) - (var(--num-of-cols) + 1) * var(--gap)) / var(--num-of-cols));
    --col-span-1: calc(1 * var(--col-width) + 0 * var(--gap));
    --col-span-2: calc(2 * var(--col-width) + 1 * var(--gap));
    --col-span-3: calc(3 * var(--col-width) + 2 * var(--gap));
    --col-span-4: calc(4 * var(--col-width) + 3 * var(--gap));
    --col-span-5: calc(5 * var(--col-width) + 4 * var(--gap));
    --col-span-6: calc(6 * var(--col-width) + 5 * var(--gap));
    --col-span-7: calc(7 * var(--col-width) + 6 * var(--gap));
    --col-span-8: calc(8 * var(--col-width) + 7 * var(--gap));
    --col-span-9: calc(9 * var(--col-width) + 8 * var(--gap));
    --col-span-10: calc(10 * var(--col-width) + 9 * var(--gap));
    --col-span-11: calc(11 * var(--col-width) + 10 * var(--gap));
    --col-span-12: calc(12 * var(--col-width) + 11 * var(--gap));
    --text-width: calc(var(--num-of-cols-text) * var(--col-width) + (var(--num-of-cols-text) - 1) * var(--gap));
    --float-image-width: var(--col-span-4);
    --float-image-offset: calc(var(--col-span-2) + var(--gap));
    --wide-image-width: var(--col-span-12);
    --wide-image-offset: calc(var(--col-span-3) + var(--gap));
}

@media (min-width: 1300px) {
    :root {
        --content-width: 1300px;
    }
}

@media (min-width: 960px) {
    :root {
        --num-of-cols-side: 3;
        --num-of-cols-text: 6;
    }
}

@media (min-width: 500px) and (max-width: 959px) {
    :root {
        --num-of-cols-side: 1;
        --num-of-cols-text: 4;
        --float-image-width: var(--col-span-3);
        --float-image-offset: calc(var(--col-span-1) + var(--gap));
        --wide-image-width: calc(var(--col-span-6) + var(--gap) * 2);
        --wide-image-offset: calc(var(--col-span-1) + var(--gap) * 2);
    }
}

@media (max-width: 499px) {
    :root {
        --num-of-cols-side: 0;
        --num-of-cols-text: 1;
        --float-image-width: var(--col-span-1);
        --float-image-offset: 0;
        --wide-image-width: calc(var(--col-span-1) + var(--gap) * 2);
        --wide-image-offset: var(--gap);
    }
}

.grid {
    display: grid;

    grid-template-columns:
        [page-left] 1fr
            [content-left] repeat(var(--num-of-cols-side), var(--col-width))
            [text-left] repeat(var(--num-of-cols-text), var(--col-width))
            [text-right] repeat(var(--num-of-cols-side), var(--col-width))
            [content-right]
        1fr [page-right];
    grid-column-gap: var(--gap);
}

@media (max-width: 499px) {
    .grid {
        display: grid;
        grid-template-columns: [page-left] 0 [content-left] var(--gap) [text-left] var(--col-span-1) [text-right] var(--gap) [content-right] 0 [page-right];
        grid-column-gap: 0;
    }
}

.text-body {
    grid-column: text-left / text-right;
}

.floating-image-left {
    float: left;
    width: var(--float-image-width);
    margin-top: var(--gap);
    margin-right: var(--gap);
    margin-bottom: var(--gap);
    margin-left: calc(-1 * var(--float-image-offset));
}

.wide-image {
    width: var(--wide-image-width);
    margin-top: var(--gap);
    margin-right: calc(-1 * var(--wide-image-offset));
    margin-bottom: var(--gap);
    margin-left: calc(-1 * var(--wide-image-offset));
}

#header {
    grid-column: page-left / page-right;
}

#header h1 {
    margin-top: 50vh;
    margin-bottom: 3em;

    /* Does not work because there are no subgrids yet */
    /* http://meyerweb.com/eric/thoughts/2016/01/15/subgrids-considered-essential/ */
    grid-column: text-left / text-right;

    /* That's why we have to set these: */
    max-width: var(--text-width);
    margin-left: auto;
    margin-right: auto;
}

#visual-grid {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

@media (max-width: 959px) {
    #visual-col-9,
    #visual-col-10,
    #visual-col-11,
    #visual-col-12,
    #visual-col-13,
    #visual-col-14 {
        display: none;
    }
}

@media (max-width: 499px) {
    #visual-col-1,
    #visual-col-2,
    #visual-col-4,
    #visual-col-5,
    #visual-col-6,
    #visual-col-7,
    #visual-col-8 {
        display: none;
    }
}
